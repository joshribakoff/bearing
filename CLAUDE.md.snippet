# Sailkit Worktree Workflow

**CRITICAL:** Never work directly in base project folders. Use git worktrees for isolation.

## Rules

1. **Base folders stay on main** - Check `worktree-list` to see which folders are bases
2. **Create worktrees for tasks** - Each task gets its own worktree
3. **Never switch branches in base folders** - Use `worktree-new`, not `git checkout`
4. **Commit parent after child commits** - After committing in a worktree, commit and push the parent project to update `workflow.jsonl`

## Sub-Agent Pattern

For worktree operations, use the Task tool with an Explore agent to avoid cluttering the main conversation:

```
Task: Check worktree status
Run worktree-check and worktree-list, report any violations or issues.
```

This keeps worktree management isolated from your main task context.

## Commands

```bash
worktree-list                        # View all worktrees
worktree-new myrepo feature-branch   # Create worktree
worktree-cleanup myrepo feature-branch  # Remove after merge
worktree-sync                        # Rebuild manifest from git
plan-sync                            # Sync plans to GitHub issues
```

## Plan Sync

Plans in `~/Projects/plans/<project>/*.md` sync to GitHub issues:
- Add `github_repo` and `github_issue` frontmatter to link
- `plan-sync` pushes local changes or pulls remote updates
- `plan-sync --dry-run` previews changes

## TUI

Run `bearing-tui` to browse projects, worktrees, and plans visually. Press `p` for plans, `o` to open PRs/issues.

## Recovery

If a base folder is on the wrong branch:
```bash
git -C myrepo checkout main
```
